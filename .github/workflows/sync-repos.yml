name: Sync QA-Changes1 to QA-Changes2

on:
  push:
    branches:
      - main  # or the branch you want to watch for changes

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout QA-Changes1
      uses: actions/checkout@v3
      with:
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Sync changes to QA-Changes2
      env:
        REPO2: nayanam-ext-eightfold/QA_Changes2  # Replace with your destination repo details
        REPO2_TOKEN: ${{ secrets.SECRET1 }}  # Personal Access Token for repo2
      run: |
        git config --global user.email "action@github.com"
        git config --global user.name "GitHub Action"

        # Clone repo2
        git clone https://x-access-token:${REPO2_TOKEN}@github.com/${REPO2}.git

        # Copy changes from repo1 (current working directory) to repo2 directory
        cp -r ./* ./QA_Changes2/

        # Navigate to the cloned repo2 directory
        cd QA_Changes2

        # Commit and push changes
        git add .
        git commit -m "Sync changes from QA-Changes1"
        git push origin main  # or the branch you want to push to in repo2
